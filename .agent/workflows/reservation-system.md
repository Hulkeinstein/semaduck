---
description: 실시간 가용성 체크 기능이 포함된 예약 시스템 전용 워크플로우
---

# 예약 시스템 구축 워크플로우

이 워크플로우는 데이터의 정확성과 실시간성이 중요한 예약 시스템의 안정적인 구현을 목표로 합니다.

## 1단계: 데이터베이스 설계 (Supabase)
- [ ] `reservations`, `operating_hours`, `blocked_dates` 테이블 생성
- [ ] RLS(Row Level Security) 설정 (관리자 전용 읽기/쓰기 권한 분리)
- **성공 기준**: Supabase 콘솔에서 기본 데이터를 수동으로 입력하고 조회할 수 있음

## 2단계: 서버 로직 및 API 구현
- [ ] 특정 날짜의 가용 시간대를 계산하는 Edge Function 또는 API Route 구현
- [ ] 운영 시간, 휴무일, 기존 예약 건수를 합산하여 '진짜 예약 가능한 시간' 도출
- **성공 기준**: API 호출 시 유효한 시간 리스트가 JSON으로 반환됨

## 3단계: 프론트엔드 연동
- [ ] 날짜 선택 시 실시간으로 API를 호출하여 가능한 시간만 노출하는 UI 구현
- [ ] 예약 폼 유효성 검사 및 전송 로직 작성
- **성공 기준**: 사용자가 날짜를 선택했을 때 이미 예약된 시간은 자동으로 비활성화됨

## 4단계: 실시간 동기화
- [ ] Supabase Realtime을 사용하여 관리자가 승인한 즉시 사용자에게 노출 최신화 (선택 사항)
- **성공 기준**: 여러 명의 사용자가 동시에 접근해도 중복 예약이 발생하지 않음
